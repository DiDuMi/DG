---
import type { SiteContent } from '../lib/siteContent';

type Props = {
  content: SiteContent;
};

const { content } = Astro.props;
const action = import.meta.env.PUBLIC_FORM_ACTION;
const email = import.meta.env.PUBLIC_CONTACT_EMAIL || content.contactInfo.email;
---

{action ? (
  <form class="panel" method="post" action={action} style="display:grid; gap:12px;">
    <div class="h2">{content.nav.contact}</div>
    <label class="field-label">
      <span class="muted">Name</span>
      <input class="field" name="name" required />
    </label>
    <label class="field-label">
      <span class="muted">Company</span>
      <input class="field" name="company" />
    </label>
    <label class="field-label">
      <span class="muted">Contact</span>
      <input class="field" name="contact" required />
    </label>
    <label class="field-label">
      <span class="muted">Message</span>
      <textarea class="field field-textarea" name="message" rows="5" required></textarea>
    </label>
    <button class="btn btn-accent" type="submit" style="justify-self:start;">{content.cta.contact}</button>
  </form>
) : (
  <div class="panel">
    <div class="h2">{content.nav.contact}</div>
    <div class="muted" style="display:grid; gap:10px;">
      <div>Form endpoint is not configured.</div>
      {email ? <div>Email: <a href={`mailto:${email}`}>{email}</a></div> : <div>Email: </div>}
    </div>
  </div>
)}
